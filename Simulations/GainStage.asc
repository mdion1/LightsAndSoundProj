Version 4
SHEET 1 4120 1800
WIRE -1840 -352 -1840 -384
WIRE -1696 -352 -1840 -352
WIRE -1472 -352 -1472 -384
WIRE -1328 -352 -1472 -352
WIRE -1840 -320 -1840 -352
WIRE -1472 -320 -1472 -352
WIRE -1696 -304 -1696 -352
WIRE -1328 -304 -1328 -352
WIRE -2000 -256 -2000 -352
WIRE -1696 -240 -1840 -240
WIRE -1632 -240 -1696 -240
WIRE -1328 -240 -1472 -240
WIRE -1264 -240 -1328 -240
WIRE -688 -240 -688 -288
WIRE -1696 -160 -1696 -176
WIRE -1696 -160 -1840 -160
WIRE -1328 -160 -1328 -176
WIRE -1328 -160 -1472 -160
WIRE -2000 -144 -2000 -176
WIRE -1840 -144 -1840 -160
WIRE -1472 -144 -1472 -160
WIRE -688 -128 -688 -160
WIRE 64 112 32 112
WIRE -48 208 -48 112
WIRE -48 208 -128 208
WIRE 64 208 64 112
WIRE 64 208 16 208
WIRE 256 208 64 208
WIRE 288 208 256 208
WIRE 448 208 368 208
WIRE 256 240 256 208
WIRE 256 240 176 240
WIRE 176 256 176 240
WIRE 256 320 176 320
WIRE -128 352 -128 208
WIRE -80 352 -128 352
WIRE 256 368 256 320
WIRE 256 368 -16 368
WIRE 304 368 256 368
WIRE 672 368 304 368
WIRE 992 368 752 368
WIRE 1072 368 992 368
WIRE 1200 368 1152 368
WIRE 1264 368 1200 368
WIRE 1392 368 1344 368
WIRE 1552 368 1392 368
WIRE -80 384 -240 384
WIRE 1200 400 1200 368
WIRE 1392 400 1392 368
WIRE -48 448 -48 400
WIRE -688 464 -784 464
WIRE -304 464 -624 464
WIRE -128 464 -128 352
WIRE -128 464 -224 464
WIRE 992 480 992 432
WIRE 1200 480 1200 464
WIRE 1200 480 992 480
WIRE 1200 512 1200 480
WIRE 1392 512 1392 464
FLAG -2000 -144 0
FLAG -2000 -352 Vdd
FLAG -688 -288 Audio_in
FLAG -688 -48 0
FLAG 304 368 AmpOut
FLAG -48 336 Vdd
FLAG -48 448 0
FLAG -784 464 Audio_in
FLAG 448 208 Midscale2
FLAG -1632 -240 Midscale1
FLAG -240 384 Midscale1
FLAG 1200 512 0
FLAG 1392 512 0
FLAG 1552 368 ADC_in
FLAG -1840 -384 Vdd
FLAG -1840 -64 0
FLAG -1264 -240 Midscale2
FLAG -1472 -384 Vdd
FLAG -1472 -64 0
SYMBOL voltage -2000 -272 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 0 33 59 Left 2
WINDOW 3 27 85 Left 2
SYMATTR InstName V1
SYMATTR Value 3.3
SYMBOL voltage -688 -144 R0
WINDOW 123 24 44 Left 2
WINDOW 39 0 0 Left 0
SYMATTR Value2 AC 1
SYMATTR InstName V4
SYMATTR Value 0
SYMBOL Opamps\\UniversalOpAmp -48 368 R0
SYMATTR InstName U1
SYMATTR Value2 Avol=0.5Meg GBW=0.73Meg Vos=0
SYMATTR SpiceLine En=0 Enk=0 In=0 Ink=0 Rin=1e13
SYMBOL cap -624 448 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C5
SYMATTR Value {C_in}
SYMBOL res 48 96 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R13
SYMATTR Value {R_fbTop}
SYMBOL cap 16 192 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C7
SYMATTR Value {C_fb}
SYMBOL res -208 448 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R11
SYMATTR Value {R_fbBot}
SYMBOL res 240 224 R0
SYMATTR InstName R14
SYMATTR Value {R_fbTop}
SYMBOL res 384 192 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R15
SYMATTR Value {R_fbBot}
SYMBOL res -1856 -336 R0
SYMATTR InstName R7
SYMATTR Value 10Meg
SYMBOL res -1856 -256 R0
SYMATTR InstName R8
SYMATTR Value 10Meg
SYMBOL cap -1712 -240 R0
SYMATTR InstName C4
SYMATTR Value 1n
SYMBOL cap 160 256 R0
SYMATTR InstName C8
SYMATTR Value {C_fb}
SYMBOL res 768 352 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R16
SYMATTR Value 1k
SYMBOL res 1168 352 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R9
SYMATTR Value 10k
SYMBOL cap 1184 400 R0
SYMATTR InstName C6
SYMATTR Value 5p
SYMBOL res 1360 352 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R1
SYMATTR Value 10k
SYMBOL cap 1376 400 R0
SYMATTR InstName C10
SYMATTR Value 5p
SYMBOL cap -1712 -304 R0
SYMATTR InstName C3
SYMATTR Value 1n
SYMBOL res -1488 -336 R0
SYMATTR InstName R4
SYMATTR Value 10Meg
SYMBOL res -1488 -256 R0
SYMATTR InstName R5
SYMATTR Value 10Meg
SYMBOL cap -1344 -240 R0
SYMATTR InstName C2
SYMATTR Value 1µ
SYMBOL cap -1344 -304 R0
SYMATTR InstName C1
SYMATTR Value 1µ
SYMBOL res -1856 -160 R0
SYMATTR InstName R6
SYMATTR Value 1k
SYMBOL res -1488 -160 R0
SYMATTR InstName R2
SYMATTR Value 1k
SYMBOL res -704 -256 R0
SYMATTR InstName R3
SYMATTR Value 10k
SYMBOL cap 976 368 R0
SYMATTR InstName C_pin
SYMATTR Value 50p
TEXT 200 1304 Left 4 !.ac dec 20 1 1e4
TEXT -1608 -448 Left 4 ;Power rails
TEXT -808 -456 Left 4 ;MIC
TEXT -40 808 Left 2 ;;PARAMETER GROUP 1 (LOW FREQUENCY)\n \n;Hi-pass input filter stage\n.param C_in = 10n\n \n;Amplifier stage\n.param C_fb = 22p\n.param R_fbTop = 10Meg\n.param R_fbBot  = 270k
TEXT 1144 248 Left 2 ;PIC analog input impedance model
TEXT 520 808 Left 2 !;PARAMETER GROUP 2 (HIGH FREQUENCY)\n \n;Hi-pass input filter stage\n.param C_in = 1.5n\n \n;Amplifier stage\n.param C_fb = 10p\n.param R_fbTop = 10Meg\n.param R_fbBot  = 270k
TEXT -680 1416 Left 5 ;Readme:\nThis simulation is for modeling the AC transfer function of the analog gain stage,\nfor debugging and component selection. Currently there are two "groups" of component\nchoices, one for notes below middle C (65 - 262Hz), and one for notes above middle C (262 - 1047Hz).\nTo simulate one group, uncomment the corresponding "Parameter Group" SPICE directive.
